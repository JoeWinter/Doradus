~~~~~~~~~~~~~~
~ XML format ~
~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~
~ Create application ~
~~~~~~~~~~~~~~~~~~~~~~
*** Request
    POST /Application/_shards/shard
*** Response: 
    200 OK

~~~~~~~~~~~~~~~~~~~~
~ Table of Content ~
~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>12</totalobjects>
        <docs>
            <doc>
                <field name="City">Moscow</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-04-05 12:32:08</field>
                <field name="MV">
                    <value>One, Two</value>
                </field>
                <field name="People">11980000</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-05 22:12:14</field>
                <field name="MV">
                    <value>Three, Four</value>
                </field>
                <field name="People">632323</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-15 10:20:01</field>
                <field name="MV">
                    <value>Five, Six</value>
                </field>
                <field name="People">8245000</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-06-22 09:05:20</field>
                <field name="MV">
                    <value>Seven, Eight</value>
                </field>
                <field name="People">4880000</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-12-30 15:29:04</field>
                <field name="MV">
                    <value>Nine, Ten</value>
                </field>
                <field name="People">1255000</field>
                <field name="_ID">2005</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Chicago</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2013-05-28 13:14:33</field>
                <field name="MV">
                    <value>Eleven, Twelve</value>
                </field>
                <field name="People">2707000</field>
                <field name="_ID">2006</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Moscow</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-04-05 12:32:08</field>
                <field name="MV">
                    <value>Thirteen, Fourteen</value>
                </field>
                <field name="People">21980000</field>
                <field name="_ID">2007</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-05 22:12:14</field>
                <field name="MV">
                    <value>Fifteen, Sixteen</value>
                </field>
                <field name="People">1632323</field>
                <field name="_ID">2008</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-15 10:20:01</field>
                <field name="MV">
                    <value>Seventeen, Eighteen</value>
                </field>
                <field name="People">18245000</field>
                <field name="_ID">2009</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-06-22 09:05:20</field>
                <field name="MV">
                    <value>Nineteen, Twenty</value>
                </field>
                <field name="People">14880000</field>
                <field name="_ID">2010</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-12-30 15:29:04</field>
                <field name="MV">
                    <value>Twenty One, Twenty Two</value>
                </field>
                <field name="People">11255000</field>
                <field name="_ID">2011</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Chicago</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2013-05-28 13:14:33</field>
                <field name="MV">
                    <value>Twenty Three, Twenty Four</value>
                </field>
                <field name="People">12707000</field>
                <field name="_ID">2012</field>
                <field name="_shard">shard</field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"12",
          "docs":[
             {
                "doc":{
                   "City":"Moscow",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2011-04-05 12:32:08",
                   "MV":[
                      "One, Two"
                   ],
                   "People":"11980000",
                   "_ID":"2001",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2011-04-05 22:12:14",
                   "MV":[
                      "Three, Four"
                   ],
                   "People":"632323",
                   "_ID":"2002",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2011-04-15 10:20:01",
                   "MV":[
                      "Five, Six"
                   ],
                   "People":"8245000",
                   "_ID":"2003",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2011-06-22 09:05:20",
                   "MV":[
                      "Seven, Eight"
                   ],
                   "People":"4880000",
                   "_ID":"2004",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2012-12-30 15:29:04",
                   "MV":[
                      "Nine, Ten"
                   ],
                   "People":"1255000",
                   "_ID":"2005",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Chicago",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2013-05-28 13:14:33",
                   "MV":[
                      "Eleven, Twelve"
                   ],
                   "People":"2707000",
                   "_ID":"2006",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Moscow",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2011-04-05 12:32:08",
                   "MV":[
                      "Thirteen, Fourteen"
                   ],
                   "People":"21980000",
                   "_ID":"2007",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2011-04-05 22:12:14",
                   "MV":[
                      "Fifteen, Sixteen"
                   ],
                   "People":"1632323",
                   "_ID":"2008",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2011-04-15 10:20:01",
                   "MV":[
                      "Seventeen, Eighteen"
                   ],
                   "People":"18245000",
                   "_ID":"2009",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2011-06-22 09:05:20",
                   "MV":[
                      "Nineteen, Twenty"
                   ],
                   "People":"14880000",
                   "_ID":"2010",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2012-12-30 15:29:04",
                   "MV":[
                      "Twenty One, Twenty Two"
                   ],
                   "People":"11255000",
                   "_ID":"2011",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Chicago",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2013-05-28 13:14:33",
                   "MV":[
                      "Twenty Three, Twenty Four"
                   ],
                   "People":"12707000",
                   "_ID":"2012",
                   "_shard":"shard"
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~   Test for Aggregates: Metric Expressions ~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~
~ INTEGER ~
~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=MAX(People)+MIN(People)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="MAX(People)+MIN(People)" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>22612323</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>23235000</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>18877323</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"MAX(People)+MIN(People)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"22612323",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"23235000",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"18877323",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=(MAX(People)+MIN(People))/3&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="(MAX(People)+MIN(People))/3" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>7537441</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>7745000</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>6292441</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"(MAX(People)+MIN(People))/3",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"7537441",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"7745000",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"6292441",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People)*1.5&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(People)*1.5" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>18</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>9</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>9</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People)*1.5",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"18",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"9",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"9",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=SUM(People)-AVERAGE(People)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="SUM(People)-AVERAGE(People)" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>101198758.833</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>55191666.666999996</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>36807205</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"SUM(People)-AVERAGE(People)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"101198758.833",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"55191666.666999996",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"36807205",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People)*3.14168*(-2)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(People)*3.14168*(-2)" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>-75.40032</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>-37.70016</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>-37.70016</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People)*3.14168*(-2)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"-75.40032",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"-37.70016",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"-37.70016",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=(MAX(People)+MIN(People))/3,COUNT(People)*2,SUM(People)-AVERAGE(People),COUNT(People)*3.14168*(-2)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country"
            metric="(MAX(People)+MIN(People))/3,COUNT(People)*2,SUM(People)-AVERAGE(People),COUNT(People)*3.14168*(-2)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="(MAX(People)+MIN(People))/3">
                <summary>7537441</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>7745000</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6292441</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="COUNT(People)*2">
                <summary>24</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>12</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>12</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="SUM(People)-AVERAGE(People)">
                <summary>101198758.833</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>55191666.666999996</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>36807205</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="COUNT(People)*3.14168*(-2)">
                <summary>-75.40032</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>-37.70016</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>-37.70016</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"(MAX(People)+MIN(People))/3,COUNT(People)*2,SUM(People)-AVERAGE(People),COUNT(People)*3.14168*(-2)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"(MAX(People)+MIN(People))/3",
                   "summary":"7537441",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"7745000",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6292441",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)*2",
                   "summary":"24",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"12",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"12",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"SUM(People)-AVERAGE(People)",
                   "summary":"101198758.833",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"55191666.666999996",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"36807205",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)*3.14168*(-2)",
                   "summary":"-75.40032",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"-37.70016",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"-37.70016",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~
~ TIMESTAMP ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(CreateDate)/10&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(CreateDate)/10" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>1.2</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>0.6</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>0.6</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(CreateDate)/10",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"1.2",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"0.6",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"0.6",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~
~ STRING SV ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=((COUNT(City)/10)*2)+3&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="((COUNT(City)/10)*2)+3" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>5.4</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4.2</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>4.2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"((COUNT(City)/10)*2)+3",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"5.4",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4.2",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4.2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~
~ STRING MV ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=((COUNT(MV)/10)*2)+3&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="((COUNT(MV)/10)*2)+3" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>5.4</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4.2</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>4.2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"((COUNT(MV)/10)*2)+3",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"5.4",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4.2",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4.2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    DELETE /_applications/Application/ApplicationKey
*** Response: 
    200 OK

~~~~~~~~~~~~~~~
~ JSON format ~
~~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~
~ Create application ~
~~~~~~~~~~~~~~~~~~~~~~
*** Request
    POST /Application/_shards/shard
*** Response: 
    200 OK

~~~~~~~~~~~~~~~~~~~~
~ Table of Content ~
~~~~~~~~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_query?q=*&f=_all&shards=shard
*** Response: xml
    200 OK
    <results>
        <totalobjects>12</totalobjects>
        <docs>
            <doc>
                <field name="City">Moscow</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-04-05 12:32:08</field>
                <field name="MV">
                    <value>One, Two</value>
                </field>
                <field name="People">11980000</field>
                <field name="_ID">2001</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-05 22:12:14</field>
                <field name="MV">
                    <value>Three, Four</value>
                </field>
                <field name="People">632323</field>
                <field name="_ID">2002</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-15 10:20:01</field>
                <field name="MV">
                    <value>Five, Six</value>
                </field>
                <field name="People">8245000</field>
                <field name="_ID">2003</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-06-22 09:05:20</field>
                <field name="MV">
                    <value>Seven, Eight</value>
                </field>
                <field name="People">4880000</field>
                <field name="_ID">2004</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-12-30 15:29:04</field>
                <field name="MV">
                    <value>Nine, Ten</value>
                </field>
                <field name="People">1255000</field>
                <field name="_ID">2005</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Chicago</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2013-05-28 13:14:33</field>
                <field name="MV">
                    <value>Eleven, Twelve</value>
                </field>
                <field name="People">2707000</field>
                <field name="_ID">2006</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Moscow</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-04-05 12:32:08</field>
                <field name="MV">
                    <value>Thirteen, Fourteen</value>
                </field>
                <field name="People">21980000</field>
                <field name="_ID">2007</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Washington</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-05 22:12:14</field>
                <field name="MV">
                    <value>Fifteen, Sixteen</value>
                </field>
                <field name="People">1632323</field>
                <field name="_ID">2008</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">New York</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2011-04-15 10:20:01</field>
                <field name="MV">
                    <value>Seventeen, Eighteen</value>
                </field>
                <field name="People">18245000</field>
                <field name="_ID">2009</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Saint-Petersburg</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2011-06-22 09:05:20</field>
                <field name="MV">
                    <value>Nineteen, Twenty</value>
                </field>
                <field name="People">14880000</field>
                <field name="_ID">2010</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Novgorod</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">Russia</field>
                <field name="CreateDate">2012-12-30 15:29:04</field>
                <field name="MV">
                    <value>Twenty One, Twenty Two</value>
                </field>
                <field name="People">11255000</field>
                <field name="_ID">2011</field>
                <field name="_shard">shard</field>
            </doc>
            <doc>
                <field name="City">Chicago</field>
                <field name="CloseDate">2014-01-01 00:00:01</field>
                <field name="Country">USA</field>
                <field name="CreateDate">2013-05-28 13:14:33</field>
                <field name="MV">
                    <value>Twenty Three, Twenty Four</value>
                </field>
                <field name="People">12707000</field>
                <field name="_ID">2012</field>
                <field name="_shard">shard</field>
            </doc>
        </docs>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "totalobjects":"12",
          "docs":[
             {
                "doc":{
                   "City":"Moscow",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2011-04-05 12:32:08",
                   "MV":[
                      "One, Two"
                   ],
                   "People":"11980000",
                   "_ID":"2001",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2011-04-05 22:12:14",
                   "MV":[
                      "Three, Four"
                   ],
                   "People":"632323",
                   "_ID":"2002",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2011-04-15 10:20:01",
                   "MV":[
                      "Five, Six"
                   ],
                   "People":"8245000",
                   "_ID":"2003",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2011-06-22 09:05:20",
                   "MV":[
                      "Seven, Eight"
                   ],
                   "People":"4880000",
                   "_ID":"2004",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2012-12-30 15:29:04",
                   "MV":[
                      "Nine, Ten"
                   ],
                   "People":"1255000",
                   "_ID":"2005",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Chicago",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2013-05-28 13:14:33",
                   "MV":[
                      "Eleven, Twelve"
                   ],
                   "People":"2707000",
                   "_ID":"2006",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Moscow",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2011-04-05 12:32:08",
                   "MV":[
                      "Thirteen, Fourteen"
                   ],
                   "People":"21980000",
                   "_ID":"2007",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Washington",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2011-04-05 22:12:14",
                   "MV":[
                      "Fifteen, Sixteen"
                   ],
                   "People":"1632323",
                   "_ID":"2008",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"New York",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2011-04-15 10:20:01",
                   "MV":[
                      "Seventeen, Eighteen"
                   ],
                   "People":"18245000",
                   "_ID":"2009",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Saint-Petersburg",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2011-06-22 09:05:20",
                   "MV":[
                      "Nineteen, Twenty"
                   ],
                   "People":"14880000",
                   "_ID":"2010",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Novgorod",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"Russia",
                   "CreateDate":"2012-12-30 15:29:04",
                   "MV":[
                      "Twenty One, Twenty Two"
                   ],
                   "People":"11255000",
                   "_ID":"2011",
                   "_shard":"shard"
                }
             },
             {
                "doc":{
                   "City":"Chicago",
                   "CloseDate":"2014-01-01 00:00:01",
                   "Country":"USA",
                   "CreateDate":"2013-05-28 13:14:33",
                   "MV":[
                      "Twenty Three, Twenty Four"
                   ],
                   "People":"12707000",
                   "_ID":"2012",
                   "_shard":"shard"
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~   Test for Aggregates: Metric Expressions ~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~
~ INTEGER ~
~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=MAX(People)+MIN(People)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="MAX(People)+MIN(People)" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>22612323</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>23235000</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>18877323</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"MAX(People)+MIN(People)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"22612323",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"23235000",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"18877323",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=(MAX(People)+MIN(People))/3&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="(MAX(People)+MIN(People))/3" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>7537441</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>7745000</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>6292441</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"(MAX(People)+MIN(People))/3",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"7537441",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"7745000",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"6292441",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People)*1.5&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(People)*1.5" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>18</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>9</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>9</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People)*1.5",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"18",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"9",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"9",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=SUM(People)-AVERAGE(People)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="SUM(People)-AVERAGE(People)" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>101198758.833</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>55191666.666999996</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>36807205</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"SUM(People)-AVERAGE(People)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"101198758.833",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"55191666.666999996",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"36807205",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=COUNT(People)*3.14168*(-2)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(People)*3.14168*(-2)" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>-75.40032</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>-37.70016</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>-37.70016</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(People)*3.14168*(-2)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"-75.40032",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"-37.70016",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"-37.70016",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    GET /Application/Table/_aggregate?m=(MAX(People)+MIN(People))/3,COUNT(People)*2,SUM(People)-AVERAGE(People),COUNT(People)*3.14168*(-2)&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country"
            metric="(MAX(People)+MIN(People))/3,COUNT(People)*2,SUM(People)-AVERAGE(People),COUNT(People)*3.14168*(-2)" query="*"/>
        <totalobjects>12</totalobjects>
        <groupsets>
            <groupset group="Country" metric="(MAX(People)+MIN(People))/3">
                <summary>7537441</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>7745000</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>6292441</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="COUNT(People)*2">
                <summary>24</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>12</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>12</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="SUM(People)-AVERAGE(People)">
                <summary>101198758.833</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>55191666.666999996</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>36807205</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
            <groupset group="Country" metric="COUNT(People)*3.14168*(-2)">
                <summary>-75.40032</summary>
                <totalgroups>2</totalgroups>
                <groups>
                    <group>
                        <metric>-37.70016</metric>
                        <field name="Country">Russia</field>
                    </group>
                    <group>
                        <metric>-37.70016</metric>
                        <field name="Country">USA</field>
                    </group>
                </groups>
            </groupset>
        </groupsets>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"(MAX(People)+MIN(People))/3,COUNT(People)*2,SUM(People)-AVERAGE(People),COUNT(People)*3.14168*(-2)",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "groupsets":[
             {
                "groupset":{
                   "group":"Country",
                   "metric":"(MAX(People)+MIN(People))/3",
                   "summary":"7537441",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"7745000",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"6292441",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)*2",
                   "summary":"24",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"12",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"12",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"SUM(People)-AVERAGE(People)",
                   "summary":"101198758.833",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"55191666.666999996",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"36807205",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             },
             {
                "groupset":{
                   "group":"Country",
                   "metric":"COUNT(People)*3.14168*(-2)",
                   "summary":"-75.40032",
                   "totalgroups":"2",
                   "groups":[
                      {
                         "group":{
                            "metric":"-37.70016",
                            "field":{
                               "Country":"Russia"
                            }
                         }
                      },
                      {
                         "group":{
                            "metric":"-37.70016",
                            "field":{
                               "Country":"USA"
                            }
                         }
                      }
                   ]
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~
~ TIMESTAMP ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=COUNT(CreateDate)/10&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="COUNT(CreateDate)/10" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>1.2</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>0.6</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>0.6</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"COUNT(CreateDate)/10",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"1.2",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"0.6",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"0.6",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~
~ STRING SV ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=((COUNT(City)/10)*2)+3&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="((COUNT(City)/10)*2)+3" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>5.4</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4.2</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>4.2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"((COUNT(City)/10)*2)+3",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"5.4",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4.2",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4.2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

~~~~~~~~~~~~~
~ STRING MV ~
~~~~~~~~~~~~~
*** Request
    GET /Application/Table/_aggregate?m=((COUNT(MV)/10)*2)+3&f=Country&shards=shard
*** Response: xml
    200 OK
    <results>
        <aggregate group="Country" metric="((COUNT(MV)/10)*2)+3" query="*"/>
        <totalobjects>12</totalobjects>
        <summary>5.4</summary>
        <totalgroups>2</totalgroups>
        <groups>
            <group>
                <metric>4.2</metric>
                <field name="Country">Russia</field>
            </group>
            <group>
                <metric>4.2</metric>
                <field name="Country">USA</field>
            </group>
        </groups>
    </results>
*** Response: json
    200 OK
    {
       "results":{
          "aggregate":{
             "metric":"((COUNT(MV)/10)*2)+3",
             "query":"*",
             "group":"Country"
          },
          "totalobjects":"12",
          "summary":"5.4",
          "totalgroups":"2",
          "groups":[
             {
                "group":{
                   "metric":"4.2",
                   "field":{
                      "Country":"Russia"
                   }
                }
             },
             {
                "group":{
                   "metric":"4.2",
                   "field":{
                      "Country":"USA"
                   }
                }
             }
          ]
       }
    }

*** Request
    DELETE /_applications/Application/ApplicationKey
*** Response: 
    200 OK

